<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="map[]" />
    
    <link rel="shortcut icon" type="image/x-icon" href="https://recherj.github.io/img/favicon.ico">
    <title>Fastlaneè‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½²</title>
    <meta name="generator" content="Hugo 0.41" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://recherj.github.io/css/main.css" />
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old" />
    
    <link rel="stylesheet" href="https://recherj.github.io/css/code.css">
    
    <!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->

    
  </head>

  <body>
    <div id="wrap">

      
      <nav class="navbar navbar-default">
  <div class="navbar-container">
    <div class="navbar-header">
      <a class="navbar-brand" href="https://recherj.github.io/"><img src="https://recherj.github.io//img/favicon.png" /></a>
      <span>åšå¾·è½½ç‰©ï¼Œä¸Šå–„è‹¥æ°´</span>
    </div>
    <ul class="nav navbar-nav navbar-right">
        
          
          <li><a href="/blog/">åšå®¢</a></li>
          
          <li><a href="/about/">å…³äº</a></li>
          
        
        </ul>
  </div>
</nav>

      
      <div class="container article-content">
        <div class="article-top-block">
            <div class="blog-post">
              <h3>
                <strong><a href="https://recherj.github.io/blog/fastlane%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85%E9%83%A8%E7%BD%B2/">Fastlaneè‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½²</a></strong>
              </h3>
            </div>
            <div class="blog-title">
              <h4>
              June 13, 2018
                &nbsp;&nbsp;
                
              </h4>
            </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="blogpost">
              <p>æˆ‘ä»¬çš„ç»´è¯­ç”µå•†é¡¹ç›®æ˜¯ swift å’Œ OC æ··ç¼–ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰‹åŠ¨æ‰“åŒ…å‘å¸ƒæµ‹è¯•ç‰ˆæ—¶å·¨æ…¢ï¼Œæœ€è¿‘åˆšå¥½æŠŠé¡¹ç›®é‡Œçš„éƒ¨åˆ†ç½‘ç»œåº“ä»åŸæ¥çš„OCç‰ˆæ¢åˆ°äº†swiftç‰ˆï¼Œæ­£åœ¨æ…¢æ…¢çš„å» Objective-C åŒ–ã€‚</p>

<p>ä¹…é—» fastlane æ˜¯è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ©å™¨ï¼Œä»Šå¤©å°±ç€å®çœ‹äº†ä¸€ä¸‹æ•™ç¨‹ã€‚ç®€å•æŠŠæˆ‘è¸©è¿‡çš„å‘è®°å½•ä¸‹ã€‚</p>

<p></p>

<h3 id="å®‰è£…">å®‰è£…</h3>

<pre><code class="language-bash">sudo gem install fastlane -n /usr/local/bin 
</code></pre>

<p>è¿™é‡Œç½‘ä¸Šå¤§éƒ¨åˆ†çš„æ•™ç¨‹æ˜¯è¯´ <code>sudo gem install fastlane</code> ä½†è‡³å°‘æˆ‘åœ¨ macOS High Sierra ä¸Šæ˜¯ä¸æˆåŠŸçš„ï¼Œä¼šæŠ¥æƒé™é—®é¢˜</p>

<blockquote>
<p>ERROR:  While executing gem &hellip; (Gem::FilePermissionError)
You don&rsquo;t have write permissions for the /usr/bin</p>
</blockquote>

<p>å‚è€ƒé“¾æ¥<a href="https://stackoverflow.com/questions/14607193/installing-gem-or-updating-rubygems-fails-with-permissions-error">Installing gem or updating RubyGems fails with permissions error</a>ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘é€‰é€‰æ‹©äº†æŒ‡å®šç›®å½•å®‰è£…ã€‚</p>

<p>ç„¶åè¿›å…¥é¡¹ç›®å·¥ç¨‹ä¸­æ‰§è¡Œ <code>fastlane init</code> å®ƒä¼šè¯¢é—®ä¸€ä¸‹é…ç½®é€‰é¡¹ï¼Œå…ˆåä¾æ¬¡è¾“å…¥ AppID, AppleID ã€å¯†ç ã€iTunes Connect Team ç­‰å®ŒæˆåŸºç¡€é…ç½®åï¼Œä¼šé»˜è®¤æ‰§è¡Œ <code>$ bundle update</code>ï¼Œè¿™é‡Œæˆ‘ç­‰äº†å·®ä¸å¤šåŠå°æ—¶ï¼Œæ²¡ä»»ä½•ååº”ğŸ˜‚ ã€‚ç»ˆæ­¢åé‡æ–°æ‰‹åŠ¨æ‰§è¡Œäº†ä¸‹ <code>$ bundle update</code> è¯´æ²¡æœ‰æƒé™ï¼Œæœæ–­sudo åå¾ˆå¿«å°±å®‰è£…å¥½äº†ã€‚</p>

<p>æµ‹è¯•ç‰ˆéœ€è¦ä¸Šä¼ åˆ° fir.im æ‰€ä»¥è¿˜éœ€å®‰è£…ä¸¤ä¸ªéœ€è¦çš„æ’ä»¶ <code>fastlane add_plugin versioning</code>ã€<code>fastlane add_plugin firim</code> ï¼Œfirimè¿™ä¸ªæ’ä»¶å®‰è£…ä¹‹å‰æœ‰ä¾èµ– firim</p>

<p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fs9z63xaogj319m0astax.jpg" alt="" /></p>

<p>æ‰€ä»¥åŒç†ä¹Ÿè¦æŒ‡å®šç›®å½•å®‰è£…</p>

<pre><code class="language-bash">$ sudo gem install -n /usr/local/bin firim -v '0.2.1' --source 'https://rubygems.org'
</code></pre>

<p>å†å®‰è£… firim æ’ä»¶å°±æ­£å¸¸äº†ã€‚</p>

<h3 id="é…ç½®">é…ç½®</h3>

<p>ç¼–è¾‘ Fastfile</p>

<pre><code class="language-ruby">lane :to_firim do
  # å¦‚æœä½ ç”¨ pod install
  cocoapods
  # å¦‚æœä½ æ²¡æœ‰ç”³è¯·adhocè¯ä¹¦ï¼Œsighä¼šè‡ªåŠ¨å¸®ä½ ç”³è¯·ï¼Œå¹¶ä¸”æ·»åŠ åˆ°Xcodeé‡Œ
  #sigh(adhoc: true)
  # ä»¥ä¸‹ä¸¤ä¸ªactionæ¥è‡ªfastlane-plugin-versioningï¼Œ
  # ç¬¬ä¸€ä¸ªé€’å¢ Buildï¼Œç¬¬äºŒä¸ªè®¾å®šVersionã€‚
  # å¦‚æœä½ æœ‰å¤šä¸ªtargetï¼Œå°±å¿…é¡»æŒ‡å®štargetçš„å€¼ï¼Œå¦åˆ™å®ƒä¼šç›´æ¥æ‰¾æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªplistä¿®æ”¹
  # åœ¨è¿™é‡Œæˆ‘å»ºè®®æ¯ä¸€ä¸ªæ‰“çš„åŒ…çš„Buildéƒ½è¦ä¸ä¸€æ ·ï¼Œè¿™æ ·crashäº†æ‹¿åˆ°æ—¥å¿—ï¼Œå¯ä»¥å¯¹åº”åˆ°ipaä¸Š
  increment_build_number_in_plist(target: &quot;XXXXX&quot;)
  increment_version_number_in_plist(
    target: &quot;XXXXX&quot;,
    version_number: '4.2.0'
    )
  # gymç”¨æ¥ç¼–è¯‘ipa
  gym(
    output_directory: './firim',
    export_options: {
      method: &quot;ad-hoc&quot;, # æŒ‡å®šæ‰“åŒ…æ–¹å¼
      teamID: &quot;XXXXX&quot;,
      thinning: &quot;&lt;none&gt;&quot;
    },
    scheme: &quot;XXXXX&quot;
    )
  # ä¸Šä¼ ipaåˆ°fir.imæœåŠ¡å™¨ï¼Œåœ¨fir.imè·å–firim_api_token
  firim(firim_api_token: &quot;XXXXXXXXXXXXXXXXXXXX&quot;)
end
</code></pre>

<p>å°† target ã€ç‰ˆæœ¬å·ã€firim_tokenã€TeamIDç­‰ä¿¡æ¯é…ç½®å¥½åå°±å¯ä»¥ run <code>fastlane to_firim</code> ä¸Šä¼ åˆ° fir.im äº†ã€‚</p>

<h3 id="æ‰“åŒ…">æ‰“åŒ…</h3>

<p>ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ° cocoapods æ—¶æŠ¥é”™äº†ï¼ŒæŸ¥äº†ä¸‹éœ€è¦åœ¨ Pluginfile æ–‡ä»¶ä¸­åŠ ä¸Š</p>

<pre><code class="language-bash">gem 'cocoapods'
</code></pre>

<p>ç„¶ååœ¨æ‰§è¡Œï¼Œå‘ç°ä¸Šä¼ firim æ—¶æŠ¥é”™ï¼Œä¸€æŸ¥å‘ç°æ²¡æœ‰è®¾ç½®tokenï¼Œå»fir.imä¸Šç”Ÿæˆäº†api_tokenåå¡«å†™ä¸Šåå†æ‰§è¡Œç»ˆäºæˆåŠŸäº†ã€‚</p>

<p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fs9zkgxyrxj319c0ho0vn.jpg" alt="" /></p>

<p>ä¸Šfir.im æ£€æŸ¥ä¸‹ï¼Œæœ‰çš„ã€‚perfectï¼</p>

<p>è‡³æ­¤å°±åˆæ­¥å®Œæˆæœ€åŸºæœ¬çš„æµ‹è¯•ç‰ˆä¸Šä¼ çš„é…ç½®ï¼Œåç»­è¿˜éœ€è¦å†ç ”ç©¶ä¸‹å»é™¤ä¸€äº›ä¸å¿…è¦çš„logå’Œè­¦å‘Šï¼Œå› ä¸ºç›®å‰åœ¨æ‰“åŒ…æ—¶æ§åˆ¶å°ä¼šå°†æ‰€æœ‰çš„è­¦å‘Šä¹Ÿè¾“å‡ºã€‚</p>

<h3 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h3>

<ul>
<li><a href="https://blog.csdn.net/kmyhy/article/details/52441681">fastlane æ•™ç¨‹: å…¥é—¨</a></li>
<li><a href="https://www.jianshu.com/p/c38157e5d6c1">Fastlaneå®‰è£…æŒ‡å—</a></li>
<li><a href="https://docs.fastlane.tools">fastlane docs</a></li>
<li><a href="https://www.jianshu.com/p/2918cf082b9d">fastlane è‡ªåŠ¨æ‰“åŒ…åˆ° fir.im çš„è¸©å‘ä¹‹è·¯</a></li>
<li><a href="https://github.com/fastlane/fastlane/issues/6073">i&rsquo;m requred to install cocoa pods,but i have installed. ! </a></li>
</ul>
              <hr>
              <div class="related-posts">
                <h5>Related Posts</h5>
                
              </div>
            </div>
          </div>
          <hr>
        <div class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">

    (function() {
      
      
      if (window.location.hostname == "localhost")
        return;

      var disqus_shortname = '';
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
        </div>
      </div>
      
    </div>

    
    <footer>
  <div id="footer">
    <div class="footer-container">
      <p class="text-muted">&copy; All rights reserved. Powered by <a href="https://gohugo.io/">Hugo</a> and
      <a href="http://github.com/RecherJ/canary/">canary</a> with â™¥</p>
    </div>
  </div>
</footer>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://recherj.github.io/js/docs.min.js"></script>
<script src="https://recherj.github.io/js/main.js"></script>

<script src="https://recherj.github.io/js/ie10-viewport-bug-workaround.js"></script>


    
  </body>
</html>
